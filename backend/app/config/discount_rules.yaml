# Discount Rules Configuration
# Rule-based discount engine for expiry-based pricing

# Global Settings
global:
  min_discount_pct: 5.0        # Minimum discount percentage
  max_discount_pct: 80.0       # Maximum discount percentage to avoid losses
  default_price_floor: 0.3     # Default minimum price as % of base price (30%)

# Discount Rules
# Rules are evaluated in order - first matching rule wins
# Conditions support: days_to_expiry, quantity, category
rules:
  # Critical expiry - Very aggressive discount
  - name: "Critical Expiry"
    description: "Products expiring in 2 days or less"
    conditions:
      days_to_expiry: "<=2"
    discount_pct: 60.0
    price_floor: 0.25            # Allow up to 75% discount

  # High urgency - Strong discount
  - name: "High Urgency"
    description: "Products expiring within a week"
    conditions:
      days_to_expiry: "<=7"
      days_to_expiry: ">2"
    discount_pct: 40.0
    price_floor: 0.35

  # Medium urgency - Moderate discount
  - name: "Medium Urgency"
    description: "Products expiring within 2 weeks"
    conditions:
      days_to_expiry: "<=14"
      days_to_expiry: ">7"
    discount_pct: 25.0
    price_floor: 0.45

  # Low urgency - Light discount
  - name: "Low Urgency"
    description: "Products expiring within a month"
    conditions:
      days_to_expiry: "<=30"
      days_to_expiry: ">14"
    discount_pct: 15.0
    price_floor: 0.60

  # Overstocked - Inventory-based discount
  - name: "Overstocked"
    description: "High inventory with moderate expiry time"
    conditions:
      days_to_expiry: "<=30"
      days_to_expiry: ">7"
      quantity: ">100"
    discount_pct: 20.0
    price_floor: 0.50

  # Critical overstock - Combined urgency
  - name: "Critical Overstock"
    description: "High inventory expiring soon"
    conditions:
      days_to_expiry: "<=7"
      quantity: ">50"
    discount_pct: 50.0
    price_floor: 0.30

# Category-specific rules (optional overrides)
category_rules:
  dairy:
    rules:
      - name: "Dairy Critical"
        conditions:
          days_to_expiry: "<=3"
        discount_pct: 50.0
        price_floor: 0.30

  bakery:
    rules:
      - name: "Bakery Same Day"
        conditions:
          days_to_expiry: "<=1"
        discount_pct: 70.0
        price_floor: 0.20

  produce:
    rules:
      - name: "Produce Aging"
        conditions:
          days_to_expiry: "<=5"
        discount_pct: 45.0
        price_floor: 0.35
